services:
  dkan.datastore.service:
    class: \Drupal\datastore\Service
    arguments:
      - '@datastore.service.factory.resource'
      - '@datastore.service.factory.import'
      - '@queue'
      - '@dkan.common.job_store'

  dkan.datastore.service.factory.resource:
    class: \Drupal\datastore\Service\Factory\Resource
    arguments:
      - '@entity.repository'
      - '@file_system'
      - '@dkan.common.job_store'

  dkan.datastore.service.factory.import:
    class: \Drupal\datastore\Service\Factory\Import
    arguments:
      - '@dkan.common.job_store'
      - '@datastore.database_table_factory'

  dkan.datastore.logger_channel:
    parent: logger.channel_base
    arguments: ['datastore']

  dkan.datastore.database_table_factory:
    class: \Drupal\datastore\Storage\DatabaseTableFactory
    arguments:
      - '@database'

  dkan.datastore.sql_endpoint.service:
    class: \Drupal\datastore\SqlEndpoint\Service
    arguments:
      - '@config.factory'
      - '@datastore.database_table_factory'
      - '@datastore.service.factory.resource'

  dkan.datastore.event_subscriber:
    class: \Drupal\datastore\EventSubscriber\Subscriber
    tags:
      - { name: event_subscriber }

  # @expectedDeprecation

  datastore.service:
    class: \Drupal\datastore\Service
    arguments:
      - '@datastore.service.factory.resource'
      - '@datastore.service.factory.import'
      - '@queue'
      - '@dkan.common.job_store'

    datastore.service.factory.resource:
      class: \Drupal\datastore\Service\Factory\Resource
      arguments:
        - '@entity.repository'
        - '@file_system'
        - '@dkan.common.job_store'

    datastore.service.factory.import:
      class: \Drupal\datastore\Service\Factory\Import
      arguments:
        - '@dkan.common.job_store'
        - '@datastore.database_table_factory'

    datastore.logger_channel:
      parent: logger.channel_base
      arguments: ['datastore']

    datastore.database_table_factory:
      class: \Drupal\datastore\Storage\DatabaseTableFactory
      arguments:
        - '@database'

    datastore.sql_endpoint.service:
      class: \Drupal\datastore\SqlEndpoint\Service
      arguments:
        - '@config.factory'
        - '@datastore.database_table_factory'
        - '@datastore.service.factory.resource'

